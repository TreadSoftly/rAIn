#!/usr/bin/env bash
set -euo pipefail
HERE="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ROOT="$(cd "$HERE/.." && pwd)"

PY="$(command -v python3 || command -v python)"
"$PY" "$ROOT/projects/argos/bootstrap.py" --ensure --yes >/dev/null 2>&1 || true
VPY="$("$PY" "$ROOT/projects/argos/bootstrap.py" --print-venv)"
export PYTHONPYCACHEPREFIX="${XDG_CACHE_HOME:-$HOME/.cache}/rAIn/pycache"
exec "$VPY" -m panoptes.tools.build_models "$@"

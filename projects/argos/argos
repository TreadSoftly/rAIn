#!/usr/bin/env bash
# Launch ARGOS with progress-friendly terminal settings.
set -euo pipefail

# Resolve paths
HERE="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ROOT="$(cd "$HERE/../.." && pwd)"

# Ensure terminal supports ANSI/OSC-8 for progress + clickable links
export TERM="${TERM:-xterm-256color}"
export PYTHONUTF8=1
export PYTHONIOENCODING=UTF-8
export PYTHONUNBUFFERED=1
export FORCE_COLOR=1

# Enable our progress system in nested shells / VS Code terminal
export PANOPTES_NESTED_PROGRESS="${PANOPTES_NESTED_PROGRESS:-1}"
export PANOPTES_ENABLE_OSC8="${PANOPTES_ENABLE_OSC8:-1}"

# Delegate to the root launcher
exec "$ROOT/installers/run" argos "$@"

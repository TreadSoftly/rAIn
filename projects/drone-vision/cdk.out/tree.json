{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.207.0"},"children":{"DroneVisionStack":{"id":"DroneVisionStack","path":"DroneVisionStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.207.0"},"children":{"InputBucket":{"id":"InputBucket","path":"DroneVisionStack/InputBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.207.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/InputBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{}}},"Notifications":{"id":"Notifications","path":"DroneVisionStack/InputBucket/Notifications","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/InputBucket/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.207.0"}}}},"AllowBucketNotificationsToDroneVisionStackDetectorFnF7C88CCA":{"id":"AllowBucketNotificationsToDroneVisionStackDetectorFnF7C88CCA","path":"DroneVisionStack/InputBucket/AllowBucketNotificationsToDroneVisionStackDetectorFnF7C88CCA","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DetectorFnFF517E37","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":{"Ref":"AWS::AccountId"},"sourceArn":{"Fn::GetAtt":["InputBucket3BF8630A","Arn"]}}}}}},"OutputBucket":{"id":"OutputBucket","path":"DroneVisionStack/OutputBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.207.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/OutputBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{}}}}},"DetectorFn":{"id":"DetectorFn","path":"DroneVisionStack/DetectorFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.DockerImageFunction","version":"2.207.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"DroneVisionStack/DetectorFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.207.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"DroneVisionStack/DetectorFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.207.0","metadata":[]}},"Resource":{"id":"Resource","path":"DroneVisionStack/DetectorFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"AssetImage":{"id":"AssetImage","path":"DroneVisionStack/DetectorFn/AssetImage","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr_assets.DockerImageAsset","version":"2.207.0"},"children":{"Staging":{"id":"Staging","path":"DroneVisionStack/DetectorFn/AssetImage/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.207.0"}},"Repository":{"id":"Repository","path":"DroneVisionStack/DetectorFn/AssetImage/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.207.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"DroneVisionStack/DetectorFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"imageUri":{"Fn::Sub":"${AWS::AccountId}.dkr.ecr.${AWS::Region}.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-${AWS::Region}:a7e50f50ac7f130f5dc7189773bddb93e47ab3fd7489057daa334840623dcf4e"}},"memorySize":512,"packageType":"Image","role":{"Fn::GetAtt":["DetectorFnServiceRoleA0D35E34","Arn"]},"timeout":30}}}}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"DroneVisionStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Role":{"id":"Role","path":"DroneVisionStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.207.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"DroneVisionStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.207.0","metadata":[]}},"Resource":{"id":"Resource","path":"DroneVisionStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"DroneVisionStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.207.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}}}}}}},"Resource":{"id":"Resource","path":"DroneVisionStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.207.0"}}}},"Endpoint":{"id":"Endpoint","path":"DroneVisionStack/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.LambdaRestApi","version":"2.207.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/Endpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"Endpoint"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"DroneVisionStack/Endpoint/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.207.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"DroneVisionStack/Endpoint/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.207.0","metadata":[]}},"Resource":{"id":"Resource","path":"DroneVisionStack/Endpoint/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"DroneVisionStack/Endpoint/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["EndpointCloudWatchRoleC3C64E0F","Arn"]}}}},"Deployment":{"id":"Deployment","path":"DroneVisionStack/Endpoint/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.207.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/Endpoint/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"EndpointEEF1FD8F"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"DroneVisionStack/Endpoint/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.207.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/Endpoint/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"EndpointDeployment318525DA6e5768ec3984fd0bbc9816d210a834b6"},"restApiId":{"Ref":"EndpointEEF1FD8F"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"DroneVisionStack/Endpoint/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.207.0"}},"Default":{"id":"Default","path":"DroneVisionStack/Endpoint/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.207.0","metadata":[]},"children":{"{proxy+}":{"id":"{proxy+}","path":"DroneVisionStack/Endpoint/Default/{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ProxyResource","version":"2.207.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"DroneVisionStack/Endpoint/Default/{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["EndpointEEF1FD8F","RootResourceId"]},"pathPart":"{proxy+}","restApiId":{"Ref":"EndpointEEF1FD8F"}}}},"ANY":{"id":"ANY","path":"DroneVisionStack/Endpoint/Default/{proxy+}/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.207.0","metadata":[]},"children":{"ApiPermission.DroneVisionStackEndpoint142DA884.ANY..{proxy+}":{"id":"ApiPermission.DroneVisionStackEndpoint142DA884.ANY..{proxy+}","path":"DroneVisionStack/Endpoint/Default/{proxy+}/ANY/ApiPermission.DroneVisionStackEndpoint142DA884.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DetectorFnFF517E37","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"EndpointEEF1FD8F"},"/",{"Ref":"EndpointDeploymentStageprodB78BEEA0"},"/*/*"]]}}}},"ApiPermission.Test.DroneVisionStackEndpoint142DA884.ANY..{proxy+}":{"id":"ApiPermission.Test.DroneVisionStackEndpoint142DA884.ANY..{proxy+}","path":"DroneVisionStack/Endpoint/Default/{proxy+}/ANY/ApiPermission.Test.DroneVisionStackEndpoint142DA884.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DetectorFnFF517E37","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"EndpointEEF1FD8F"},"/test-invoke-stage/*/*"]]}}}},"Resource":{"id":"Resource","path":"DroneVisionStack/Endpoint/Default/{proxy+}/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DetectorFnFF517E37","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"Endpointproxy39E2174E"},"restApiId":{"Ref":"EndpointEEF1FD8F"}}}}}}}},"ANY":{"id":"ANY","path":"DroneVisionStack/Endpoint/Default/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.207.0","metadata":[]},"children":{"ApiPermission.DroneVisionStackEndpoint142DA884.ANY..":{"id":"ApiPermission.DroneVisionStackEndpoint142DA884.ANY..","path":"DroneVisionStack/Endpoint/Default/ANY/ApiPermission.DroneVisionStackEndpoint142DA884.ANY..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DetectorFnFF517E37","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"EndpointEEF1FD8F"},"/",{"Ref":"EndpointDeploymentStageprodB78BEEA0"},"/*/"]]}}}},"ApiPermission.Test.DroneVisionStackEndpoint142DA884.ANY..":{"id":"ApiPermission.Test.DroneVisionStackEndpoint142DA884.ANY..","path":"DroneVisionStack/Endpoint/Default/ANY/ApiPermission.Test.DroneVisionStackEndpoint142DA884.ANY..","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DetectorFnFF517E37","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"EndpointEEF1FD8F"},"/test-invoke-stage/*/"]]}}}},"Resource":{"id":"Resource","path":"DroneVisionStack/Endpoint/Default/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.207.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["DetectorFnFF517E37","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Fn::GetAtt":["EndpointEEF1FD8F","RootResourceId"]},"restApiId":{"Ref":"EndpointEEF1FD8F"}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"DroneVisionStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"DroneVisionStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.207.0"}},"Condition":{"id":"Condition","path":"DroneVisionStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.207.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DroneVisionStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.207.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DroneVisionStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.207.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}